(function(menuConfig){var defaultConfig={mobileMenuMode:'overlay',animationSpeed:300,submenuWidth:300,doubleClickTime:500,mobileMenuExpandableSubmenus:false,isHoverMenu:true,wrapperSelector:'.navbar',buttonSelector:'.navbar__toggle',menuSelector:'.navbar__menu',submenuSelector:'.navbar__submenu',mobileMenuSidebarLogoSelector:null,mobileMenuSidebarLogoUrl:null,relatedContainerForOverlayMenuSelector:null,ariaButtonAttribute:'aria-haspopup',separatorItemClass:'is-separator',parentItemClass:'has-submenu',submenuLeftPositionClass:'is-left-submenu',submenuRightPositionClass:'is-right-submenu',mobileMenuOverlayClass:'navbar_mobile_overlay',mobileMenuSubmenuWrapperClass:'navbar__submenu_wrapper',mobileMenuSidebarClass:'navbar_mobile_sidebar',mobileMenuSidebarOverlayClass:'navbar_mobile_sidebar__overlay',hiddenElementClass:'is-hidden',openedMenuClass:'is-active',noScrollClass:'no-scroll',relatedContainerForOverlayMenuClass:'is-visible'};var config={};Object.keys(defaultConfig).forEach(function(key){config[key]=defaultConfig[key];});if(typeof menuConfig==='object'){Object.keys(menuConfig).forEach(function(key){config[key]=menuConfig[key];});}
function init(){if(!document.querySelectorAll(config.wrapperSelector).length){return;}
initSubmenuPositions();if(config.mobileMenuMode==='overlay'){initMobileMenuOverlay();}else if(config.mobileMenuMode==='sidebar'){initMobileMenuSidebar();}
initClosingMenuOnClickLink();if(!config.isHoverMenu){initAriaAttributes();}};function initSubmenuPositions(){var submenuParents=document.querySelectorAll(config.wrapperSelector+' .'+config.parentItemClass);for(var i=0;i<submenuParents.length;i++){var eventTrigger=config.isHoverMenu?'mouseenter':'click';submenuParents[i].addEventListener(eventTrigger,function(){var submenu=this.querySelector(config.submenuSelector);var itemPosition=this.getBoundingClientRect().left;var widthMultiplier=2;if(this.parentNode===document.querySelector(config.menuSelector)){widthMultiplier=1;}
if(config.submenuWidth!=='auto'){var submenuPotentialPosition=itemPosition+(config.submenuWidth*widthMultiplier);if(window.innerWidth<submenuPotentialPosition){submenu.classList.add(config.submenuRightPositionClass);}else{submenu.classList.add(config.submenuLeftPositionClass);}}else{var submenuPotentialPosition=0;var submenuPosition=0;if(widthMultiplier===1){submenuPotentialPosition=itemPosition+submenu.clientWidth;}else{submenuPotentialPosition=itemPosition+this.clientWidth+submenu.clientWidth;}
if(window.innerWidth<submenuPotentialPosition){submenu.classList.add(config.submenuRightPositionClass);submenuPosition=-1*submenu.clientWidth;if(widthMultiplier===1){submenuPosition=0;}
submenu.style.left=submenuPosition+'px';submenu.style.right=this.clientWidth+'px';}else{submenu.classList.add(config.submenuLeftPositionClass);submenuPosition=this.clientWidth;if(widthMultiplier===1){submenuPosition=0;}
submenu.style.left=submenuPosition+'px';}}
submenu.setAttribute('aria-hidden',false);});if(config.isHoverMenu){submenuParents[i].addEventListener('mouseleave',function(){var submenu=this.querySelector(config.submenuSelector);submenu.removeAttribute('style');submenu.setAttribute('aria-hidden',true);});}}}
function initMobileMenuOverlay(){var menuWrapper=document.createElement('div');menuWrapper.classList.add(config.mobileMenuOverlayClass);menuWrapper.classList.add(config.hiddenElementClass);var menuContentHTML=document.querySelector(config.menuSelector).outerHTML;menuWrapper.innerHTML=menuContentHTML;document.body.appendChild(menuWrapper);if(config.mobileMenuExpandableSubmenus){wrapSubmenusIntoContainer(menuWrapper);initToggleSubmenu(menuWrapper);}
var button=document.querySelector(config.buttonSelector);button.addEventListener('click',function(){var relatedContainer=document.querySelector(config.relatedContainerForOverlayMenuSelector);menuWrapper.classList.toggle(config.hiddenElementClass);button.classList.toggle(config.openedMenuClass);button.setAttribute(config.ariaButtonAttribute,button.classList.contains(config.openedMenuClass));if(button.classList.contains(config.openedMenuClass)){document.documentElement.classList.add(config.noScrollClass);if(relatedContainer){relatedContainer.classList.add(config.relatedContainerForOverlayMenuClass);}}else{document.documentElement.classList.remove(config.noScrollClass);if(relatedContainer){relatedContainer.classList.remove(config.relatedContainerForOverlayMenuClass);}}});}
function initMobileMenuSidebar(){var menuWrapper=document.createElement('div');menuWrapper.classList.add(config.mobileMenuSidebarClass);menuWrapper.classList.add(config.hiddenElementClass);var menuContentHTML='';if(config.mobileMenuSidebarLogoSelector!==null){menuContentHTML=document.querySelector(config.mobileMenuSidebarLogoSelector).outerHTML;}else if(config.mobileMenuSidebarLogoUrl!==null){menuContentHTML='<img src="'+config.mobileMenuSidebarLogoUrl+'" alt="" />';}
menuContentHTML+=document.querySelector(config.menuSelector).outerHTML;menuWrapper.innerHTML=menuContentHTML;var menuOverlay=document.createElement('div');menuOverlay.classList.add(config.mobileMenuSidebarOverlayClass);menuOverlay.classList.add(config.hiddenElementClass);document.body.appendChild(menuOverlay);document.body.appendChild(menuWrapper);if(config.mobileMenuExpandableSubmenus){wrapSubmenusIntoContainer(menuWrapper);initToggleSubmenu(menuWrapper);}
menuWrapper.addEventListener('click',function(e){e.stopPropagation();});menuOverlay.addEventListener('click',function(){menuWrapper.classList.add(config.hiddenElementClass);menuOverlay.classList.add(config.hiddenElementClass);button.classList.remove(config.openedMenuClass);button.setAttribute(config.ariaButtonAttribute,false);document.documentElement.classList.remove(config.noScrollClass);});var button=document.querySelector(config.buttonSelector);button.addEventListener('click',function(){menuWrapper.classList.toggle(config.hiddenElementClass);menuOverlay.classList.toggle(config.hiddenElementClass);button.classList.toggle(config.openedMenuClass);button.setAttribute(config.ariaButtonAttribute,button.classList.contains(config.openedMenuClass));document.documentElement.classList.toggle(config.noScrollClass);});}
function wrapSubmenusIntoContainer(menuWrapper){var submenus=menuWrapper.querySelectorAll(config.submenuSelector);for(var i=0;i<submenus.length;i++){var submenuWrapper=document.createElement('div');submenuWrapper.classList.add(config.mobileMenuSubmenuWrapperClass);submenus[i].parentNode.insertBefore(submenuWrapper,submenus[i]);submenuWrapper.appendChild(submenus[i]);}}
function initToggleSubmenu(menuWrapper){var parents=menuWrapper.querySelectorAll('.'+config.parentItemClass);for(var i=0;i<parents.length;i++){parents[i].addEventListener('click',function(e){e.stopPropagation();var submenu=this.querySelector('.'+config.mobileMenuSubmenuWrapperClass);var content=submenu.firstElementChild;if(submenu.classList.contains(config.openedMenuClass)){var height=content.clientHeight;submenu.style.height=height+'px';setTimeout(function(){submenu.style.height='0px';},0);setTimeout(function(){submenu.removeAttribute('style');submenu.classList.remove(config.openedMenuClass);},config.animationSpeed);content.setAttribute('aria-hidden',true);content.parentNode.firstElementChild.setAttribute('aria-expanded',false);}else{var height=content.clientHeight;submenu.classList.add(config.openedMenuClass);submenu.style.height='0px';setTimeout(function(){submenu.style.height=height+'px';},0);setTimeout(function(){submenu.removeAttribute('style');},config.animationSpeed);content.setAttribute('aria-hidden',false);content.parentNode.firstElementChild.setAttribute('aria-expanded',true);}});var childNodes=parents[i].children;for(var j=0;j<childNodes.length;j++){if(childNodes[j].tagName==='A'){childNodes[j].addEventListener('click',function(e){var lastClick=parseInt(this.getAttribute('data-last-click'),10);var currentTime=+new Date();if(isNaN(lastClick)){e.preventDefault();this.setAttribute('data-last-click',currentTime);}else if(lastClick+config.doubleClickTime<=currentTime){e.preventDefault();this.setAttribute('data-last-click',currentTime);}else if(lastClick+config.doubleClickTime>currentTime){e.stopPropagation();closeMenu(this,true);}});}}}}
function initAriaAttributes(){var allAriaElements=document.querySelectorAll(config.wrapperSelector+' '+'*[aria-hidden]');for(var i=0;i<allAriaElements.length;i++){var ariaElement=allAriaElements[i];if(ariaElement.parentNode.classList.contains('active')||ariaElement.parentNode.classList.contains('active-parent')){ariaElement.setAttribute('aria-hidden','false');ariaElement.parentNode.firstElementChild.setAttribute('aria-expanded',true);}else{ariaElement.setAttribute('aria-hidden','true');ariaElement.parentNode.firstElementChild.setAttribute('aria-expanded',false);}}}
function initClosingMenuOnClickLink(){var links=document.querySelectorAll(config.menuSelector+' a');for(var i=0;i<links.length;i++){if(links[i].parentNode.classList.contains(config.parentItemClass)){continue;}
links[i].addEventListener('click',function(e){closeMenu(this,false);});}}
function closeMenu(clickedLink,forceClose){if(forceClose===false){if(clickedLink.parentNode.classList.contains(config.parentItemClass)){return;}}
var relatedContainer=document.querySelector(config.relatedContainerForOverlayMenuSelector);var button=document.querySelector(config.buttonSelector);var menuWrapper=document.querySelector('.'+config.mobileMenuOverlayClass);if(!menuWrapper){menuWrapper=document.querySelector('.'+config.mobileMenuSidebarClass);}
menuWrapper.classList.add(config.hiddenElementClass);button.classList.remove(config.openedMenuClass);button.setAttribute(config.ariaButtonAttribute,false);document.documentElement.classList.remove(config.noScrollClass);if(relatedContainer){relatedContainer.classList.remove(config.relatedContainerForOverlayMenuClass);}}
init();})(window.publiiThemeMenuConfig);var comments=document.querySelector(".js-post__comments-button");if(comments){comments.addEventListener("click",function(){comments.classList.toggle("is-hidden");var container=document.querySelector(".js-post__comments-inner");container.classList.toggle("is-visible");});}
var searchButton=document.querySelector(".js-search-btn");searchOverlay=document.querySelector(".js-search-overlay");searchClose=document.querySelector(".js-search-close");searchInput=document.querySelector(".js-search-input");if(searchButton){searchButton.addEventListener("click",function(){searchOverlay.classList.add("expanded");setTimeout(function(){searchInput.focus();},60);});searchClose.addEventListener("click",function(){searchOverlay.classList.remove('expanded');});}
(function(){let shareButton=document.querySelector('.js-post__share-button');let sharePopup=document.querySelector('.js-post__share-popup');if(shareButton){sharePopup.addEventListener('click',function(e){e.stopPropagation();});shareButton.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();sharePopup.classList.toggle('is-visible');});document.body.addEventListener('click',function(){sharePopup.classList.remove('is-visible');});}
var Config={Link:".js-share",Width:500,Height:500};var slink=document.querySelectorAll(Config.Link);for(var a=0;a<slink.length;a++){slink[a].onclick=PopupHandler;}
function PopupHandler(e){e=(e?e:window.event);var t=(e.target?e.target:e.srcElement);if(sharePopup){sharePopup.classList.remove('is-visible');}
var px=Math.floor(((screen.availWidth||1024)-Config.Width)/2),py=Math.floor(((screen.availHeight||700)-Config.Height)/2);var link_href=t.href?t.href:t.parentNode.href;var popup=window.open(link_href,"social","width="+Config.Width+",height="+Config.Height+",left="+px+",top="+py+",location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1");if(popup){popup.focus();if(e.preventDefault)e.preventDefault();e.returnValue=false;}
return!!popup;}})();(function(){var newsletter_submit=document.querySelector('.newsletter-popup__submit');var newsletter=document.querySelector('.newsletter-popup');if(!newsletter){return false;}
var showOnScroll=newsletter.getAttribute('data-show-on-scroll');var showAfterTime=newsletter.getAttribute('data-show-after-time');if(showOnScroll){showOnScroll=parseInt(showOnScroll,10);}else{showOnScroll=false;}
if(showAfterTime){showAfterTime=parseInt(showAfterTime,10);}else{showAfterTime=false;}
function showNewsletterOnScroll(e){var position=window.scrollY;if(position>showOnScroll&&!newsletter.classList.contains('is-visible')){newsletter.classList.add('is-visible');}}
if(newsletter_submit){newsletter_submit.addEventListener('click',function(){localStorage.setItem('newsletter-subscribe','true');});document.querySelector('.newsletter-popup__close').addEventListener('click',function(event){event.preventDefault();localStorage.setItem('newsletter-subscribe',new Date().getTime());newsletter.classList.remove('is-visible');if(showOnScroll){window.removeEventListener('scroll',showNewsletterOnScroll);}});}
if(newsletter&&localStorage.getItem('newsletter-subscribe')!=='true'&&(!localStorage.getItem('newsletter-subscribe')||new Date().getTime()-parseInt(localStorage.getItem('newsletter-subscribe'),10)>(1000*60*60*24*30))){if(showOnScroll){window.addEventListener('scroll',showNewsletterOnScroll);}
if(showAfterTime){setTimeout(function(){newsletter.classList.add('is-visible');},showAfterTime);}}})();if(document.getElementById("js-post__progress")){document.addEventListener("scroll",function(){var scrollTop=document.documentElement["scrollTop"]||document.body["scrollTop"];var scrollBottom=(document.documentElement["scrollHeight"]||document.body["scrollHeight"])-document.documentElement.clientHeight;scrollPercent=scrollTop/scrollBottom*100+"%";document.getElementById("js-post__progress").style.setProperty("--scroll",scrollPercent);},{passive:true});}
(function(){document.addEventListener('DOMContentLoaded',(event)=>{var elemHeight=document.querySelector('.footer').clientHeight;document.querySelector('.navbar').style.marginBottom=(elemHeight+48)+'px';});})();